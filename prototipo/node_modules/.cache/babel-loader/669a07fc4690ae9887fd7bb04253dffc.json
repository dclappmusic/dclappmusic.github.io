{"remainingRequest":"/Users/robertomesejosalas/websites/dclappmusic.github.io/prototipo/node_modules/babel-loader/lib/index.js!/Users/robertomesejosalas/websites/dclappmusic.github.io/prototipo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/robertomesejosalas/websites/dclappmusic.github.io/prototipo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/robertomesejosalas/websites/dclappmusic.github.io/prototipo/src/components/PopupLogin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/robertomesejosalas/websites/dclappmusic.github.io/prototipo/src/components/PopupLogin.vue","mtime":1574531669000},{"path":"/Users/robertomesejosalas/websites/dclappmusic.github.io/prototipo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/robertomesejosalas/websites/dclappmusic.github.io/prototipo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/robertomesejosalas/websites/dclappmusic.github.io/prototipo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/robertomesejosalas/websites/dclappmusic.github.io/prototipo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport firebase from 'firebase';\nexport default {\n  name: 'PopupLogin',\n  created: function created() {},\n  mounted: function mounted() {},\n  data: function data() {\n    return {\n      user_email: \"\",\n      user_password: \"\",\n      cta_text: \"login\"\n    };\n  },\n  props: {},\n  methods: {\n    login: function login() {\n      var _this = this;\n\n      var auth = firebase.auth(); //autenticar el login\n\n      auth.signInWithEmailAndPassword(this.user_email, this.user_password).then(function () {\n        //redirigir a index\n        var user = auth.currentUser; // firestore.collection(\"usuarios\").where(\"email\", \"==\", email).\n\n        _this.$router.replace(\"fichaje\");\n\n        console.log(\"logged\");\n      }).catch(function (error) {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        window.alert(\"error: \" + errorMessage);\n      });\n    },\n    signup: function signup() {\n      var _this2 = this;\n\n      var auth = firebase.auth(); //crear login de usuario\n\n      auth.createUserWithEmailAndPassword(this.user_email, this.user_password).then(function () {\n        //añadir el usuario a la DB\n        firebase.firestore().collection(\"fans\").doc(auth.currentUser.uid).set({\n          uid: auth.currentUser.uid,\n          email: _this2.user_email\n        }).then(function () {\n          console.log(\"signup correcto\");\n        });\n      });\n    },\n    reset: function reset() {\n      var auth = firebase.auth();\n      auth.sendPasswordResetEmail(this.user_email).then(function () {\n        console.log(\"reseteando\");\n        alert(\"Revisa tu email para poner una contraseña\");\n        $(\".form\").append(\"<p>Revisa tu email para poner una contraseña</p>\");\n      }).catch(function (error) {\n        // An error happened.\n        console.log(error);\n      });\n    },\n    mostrar_reset: function mostrar_reset() {\n      $(\".password\").toggle();\n      $(\".login\").toggle();\n      $(\".reset\").toggle();\n\n      if ($(\".reset_btn\").text() === \"cambiar contraseña\") {\n        $(\".reset_btn\").text(\"atras\");\n      } else {\n        $(\".reset_btn\").text(\"cambiar contraseña\");\n      }\n    },\n    mostrar_signup: function mostrar_signup() {\n      this.cta_text = \"signup\"; // this.cta = this.cta_signup();\n      // $(\".login\").toggle();\n      // $(\".reset\").toggle();\n      // $(\".signup\").toggle();\n      // if ($(\".reset_btn\").text() === \"cambiar contraseña\") {\n      // \t$(\".reset_btn\").text(\"atras\");\n      // } else {\n      // \t$(\".reset_btn\").text(\"cambiar contraseña\");\n      // }\n    },\n    cta: function cta(accion) {\n      if (accion === \"login\") {\n        this.login();\n      } else if (accion === \"signup\") {\n        this.signup();\n      }\n    }\n  }\n};",{"version":3,"sources":["PopupLogin.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div class=\"login popup\">\n        <div class=\"sub_popup\">\n            <div class=\"form\">\n                <label class=\"form-label email\">Email\n                    <input class=\"form-input\" placeholder=\"email\" type=\"email\" v-model=\"user_email\">\n                </label>\n                <label class=\"form-label password\">Password\n                    <input class=\"form-input password\" placeholder=\"password\" type=\"password\" v-model=\"user_password\">\n                </label>\n                <button class=\"boton cta\" @click=\"cta(cta_text)\">\n                    {{cta_text}}\n                </button>\n                <button class=\"boton-med reset\" @click=\"reset\">resetear contraseña</button>\n                <a class=\"reset_btn\" @click=\"mostrar_reset\">resetear contraseña</a>\n                <a class=\"signup_btn\" @click=\"mostrar_signup\">crear una cuenta</a>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\timport firebase from 'firebase';\n\n\texport default {\n\t\tname: 'PopupLogin',\n\t\tcreated() {},\n\t\tmounted() {},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tuser_email: \"\",\n\t\t\t\tuser_password: \"\",\n                cta_text: \"login\"\n\t\t\t}\n\t\t},\n\t\tprops: {},\n\t\tmethods: {\n\t\t\tlogin: function() {\n\t\t\t\tconst auth = firebase.auth();\n\n\t\t\t\t//autenticar el login\n\t\t\t\tauth.signInWithEmailAndPassword(this.user_email, this.user_password).then(() => {\n\t\t\t\t\t//redirigir a index\n\t\t\t\t\tvar user = auth.currentUser;\n\t\t\t\t\t// firestore.collection(\"usuarios\").where(\"email\", \"==\", email).\n\t\t\t\t\tthis.$router.replace(\"fichaje\");\n\t\t\t\t\tconsole.log(\"logged\");\n\t\t\t\t}).catch((error) => {\n\t\t\t\t\t// Handle Errors here.\n\t\t\t\t\tvar errorCode = error.code;\n\t\t\t\t\tvar errorMessage = error.message;\n\t\t\t\t\twindow.alert(\"error: \" + errorMessage);\n\t\t\t\t});\n\t\t\t},\n            signup: function() {\n\t\t\t\tconst auth = firebase.auth();\n                //crear login de usuario\n                auth.createUserWithEmailAndPassword(this.user_email, this.user_password)\n                    .then(() => {\n                        //añadir el usuario a la DB\n\t\t\t\t\t\tfirebase.firestore().collection(\"fans\").doc(auth.currentUser.uid).set({\n                            uid: auth.currentUser.uid,\n                            email: this.user_email\n\t\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\t\tconsole.log(\"signup correcto\");\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t},\n\t\t\treset: function() {\n\t\t\t\tconst auth = firebase.auth();\n\t\t\t\tauth.sendPasswordResetEmail(this.user_email).then(() => {\n\t\t\t\t\tconsole.log(\"reseteando\");\n\t\t\t\t\talert(\"Revisa tu email para poner una contraseña\");\n\t\t\t\t\t$(\".form\").append(\"<p>Revisa tu email para poner una contraseña</p>\");\n\t\t\t\t}).catch((error) => {\n\t\t\t\t// An error happened.\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t});\n\t\t\t},\n\t\t\tmostrar_reset: function() {\n\t\t\t\t$(\".password\").toggle();\n\t\t\t\t$(\".login\").toggle();\n\t\t\t\t$(\".reset\").toggle();\n\t\t\t\tif ($(\".reset_btn\").text() === \"cambiar contraseña\") {\n\t\t\t\t\t$(\".reset_btn\").text(\"atras\");\n\t\t\t\t} else {\n\t\t\t\t\t$(\".reset_btn\").text(\"cambiar contraseña\");\n\t\t\t\t}\n\t\t\t},\n            mostrar_signup: function() {\n                this.cta_text = \"signup\";\n                // this.cta = this.cta_signup();\n\t\t\t\t// $(\".login\").toggle();\n\t\t\t\t// $(\".reset\").toggle();\n                // $(\".signup\").toggle();\n\t\t\t\t// if ($(\".reset_btn\").text() === \"cambiar contraseña\") {\n\t\t\t\t// \t$(\".reset_btn\").text(\"atras\");\n\t\t\t\t// } else {\n\t\t\t\t// \t$(\".reset_btn\").text(\"cambiar contraseña\");\n\t\t\t\t// }\n\t\t\t},\n            cta: function(accion) {\n                if (accion === \"login\") {\n                    this.login();\n                } else if (accion === \"signup\") {\n                    this.signup();\n                }\n            }\n\t\t}   \n\t}\n</script>"],"sourceRoot":"src/components"}]}