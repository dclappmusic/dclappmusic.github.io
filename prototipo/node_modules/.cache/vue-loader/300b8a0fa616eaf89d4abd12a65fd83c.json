{"remainingRequest":"/Users/robertomesejosalas/websites/dclappmusic.github.io/prototipo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/robertomesejosalas/websites/dclappmusic.github.io/prototipo/src/components/PopupLogin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/robertomesejosalas/websites/dclappmusic.github.io/prototipo/src/components/PopupLogin.vue","mtime":1574531669000},{"path":"/Users/robertomesejosalas/websites/dclappmusic.github.io/prototipo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/robertomesejosalas/websites/dclappmusic.github.io/prototipo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/robertomesejosalas/websites/dclappmusic.github.io/prototipo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/robertomesejosalas/websites/dclappmusic.github.io/prototipo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\timport firebase from 'firebase';\n\n\texport default {\n\t\tname: 'PopupLogin',\n\t\tcreated() {},\n\t\tmounted() {},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tuser_email: \"\",\n\t\t\t\tuser_password: \"\",\n                cta_text: \"login\"\n\t\t\t}\n\t\t},\n\t\tprops: {},\n\t\tmethods: {\n\t\t\tlogin: function() {\n\t\t\t\tconst auth = firebase.auth();\n\n\t\t\t\t//autenticar el login\n\t\t\t\tauth.signInWithEmailAndPassword(this.user_email, this.user_password).then(() => {\n\t\t\t\t\t//redirigir a index\n\t\t\t\t\tvar user = auth.currentUser;\n\t\t\t\t\t// firestore.collection(\"usuarios\").where(\"email\", \"==\", email).\n\t\t\t\t\tthis.$router.replace(\"fichaje\");\n\t\t\t\t\tconsole.log(\"logged\");\n\t\t\t\t}).catch((error) => {\n\t\t\t\t\t// Handle Errors here.\n\t\t\t\t\tvar errorCode = error.code;\n\t\t\t\t\tvar errorMessage = error.message;\n\t\t\t\t\twindow.alert(\"error: \" + errorMessage);\n\t\t\t\t});\n\t\t\t},\n            signup: function() {\n\t\t\t\tconst auth = firebase.auth();\n                //crear login de usuario\n                auth.createUserWithEmailAndPassword(this.user_email, this.user_password)\n                    .then(() => {\n                        //añadir el usuario a la DB\n\t\t\t\t\t\tfirebase.firestore().collection(\"fans\").doc(auth.currentUser.uid).set({\n                            uid: auth.currentUser.uid,\n                            email: this.user_email\n\t\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\t\tconsole.log(\"signup correcto\");\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t},\n\t\t\treset: function() {\n\t\t\t\tconst auth = firebase.auth();\n\t\t\t\tauth.sendPasswordResetEmail(this.user_email).then(() => {\n\t\t\t\t\tconsole.log(\"reseteando\");\n\t\t\t\t\talert(\"Revisa tu email para poner una contraseña\");\n\t\t\t\t\t$(\".form\").append(\"<p>Revisa tu email para poner una contraseña</p>\");\n\t\t\t\t}).catch((error) => {\n\t\t\t\t// An error happened.\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t});\n\t\t\t},\n\t\t\tmostrar_reset: function() {\n\t\t\t\t$(\".password\").toggle();\n\t\t\t\t$(\".login\").toggle();\n\t\t\t\t$(\".reset\").toggle();\n\t\t\t\tif ($(\".reset_btn\").text() === \"cambiar contraseña\") {\n\t\t\t\t\t$(\".reset_btn\").text(\"atras\");\n\t\t\t\t} else {\n\t\t\t\t\t$(\".reset_btn\").text(\"cambiar contraseña\");\n\t\t\t\t}\n\t\t\t},\n            mostrar_signup: function() {\n                this.cta_text = \"signup\";\n                // this.cta = this.cta_signup();\n\t\t\t\t// $(\".login\").toggle();\n\t\t\t\t// $(\".reset\").toggle();\n                // $(\".signup\").toggle();\n\t\t\t\t// if ($(\".reset_btn\").text() === \"cambiar contraseña\") {\n\t\t\t\t// \t$(\".reset_btn\").text(\"atras\");\n\t\t\t\t// } else {\n\t\t\t\t// \t$(\".reset_btn\").text(\"cambiar contraseña\");\n\t\t\t\t// }\n\t\t\t},\n            cta: function(accion) {\n                if (accion === \"login\") {\n                    this.login();\n                } else if (accion === \"signup\") {\n                    this.signup();\n                }\n            }\n\t\t}   \n\t}\n",{"version":3,"sources":["PopupLogin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PopupLogin.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\t<div class=\"login popup\">\n        <div class=\"sub_popup\">\n            <div class=\"form\">\n                <label class=\"form-label email\">Email\n                    <input class=\"form-input\" placeholder=\"email\" type=\"email\" v-model=\"user_email\">\n                </label>\n                <label class=\"form-label password\">Password\n                    <input class=\"form-input password\" placeholder=\"password\" type=\"password\" v-model=\"user_password\">\n                </label>\n                <button class=\"boton cta\" @click=\"cta(cta_text)\">\n                    {{cta_text}}\n                </button>\n                <button class=\"boton-med reset\" @click=\"reset\">resetear contraseña</button>\n                <a class=\"reset_btn\" @click=\"mostrar_reset\">resetear contraseña</a>\n                <a class=\"signup_btn\" @click=\"mostrar_signup\">crear una cuenta</a>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\timport firebase from 'firebase';\n\n\texport default {\n\t\tname: 'PopupLogin',\n\t\tcreated() {},\n\t\tmounted() {},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tuser_email: \"\",\n\t\t\t\tuser_password: \"\",\n                cta_text: \"login\"\n\t\t\t}\n\t\t},\n\t\tprops: {},\n\t\tmethods: {\n\t\t\tlogin: function() {\n\t\t\t\tconst auth = firebase.auth();\n\n\t\t\t\t//autenticar el login\n\t\t\t\tauth.signInWithEmailAndPassword(this.user_email, this.user_password).then(() => {\n\t\t\t\t\t//redirigir a index\n\t\t\t\t\tvar user = auth.currentUser;\n\t\t\t\t\t// firestore.collection(\"usuarios\").where(\"email\", \"==\", email).\n\t\t\t\t\tthis.$router.replace(\"fichaje\");\n\t\t\t\t\tconsole.log(\"logged\");\n\t\t\t\t}).catch((error) => {\n\t\t\t\t\t// Handle Errors here.\n\t\t\t\t\tvar errorCode = error.code;\n\t\t\t\t\tvar errorMessage = error.message;\n\t\t\t\t\twindow.alert(\"error: \" + errorMessage);\n\t\t\t\t});\n\t\t\t},\n            signup: function() {\n\t\t\t\tconst auth = firebase.auth();\n                //crear login de usuario\n                auth.createUserWithEmailAndPassword(this.user_email, this.user_password)\n                    .then(() => {\n                        //añadir el usuario a la DB\n\t\t\t\t\t\tfirebase.firestore().collection(\"fans\").doc(auth.currentUser.uid).set({\n                            uid: auth.currentUser.uid,\n                            email: this.user_email\n\t\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\t\tconsole.log(\"signup correcto\");\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t},\n\t\t\treset: function() {\n\t\t\t\tconst auth = firebase.auth();\n\t\t\t\tauth.sendPasswordResetEmail(this.user_email).then(() => {\n\t\t\t\t\tconsole.log(\"reseteando\");\n\t\t\t\t\talert(\"Revisa tu email para poner una contraseña\");\n\t\t\t\t\t$(\".form\").append(\"<p>Revisa tu email para poner una contraseña</p>\");\n\t\t\t\t}).catch((error) => {\n\t\t\t\t// An error happened.\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t});\n\t\t\t},\n\t\t\tmostrar_reset: function() {\n\t\t\t\t$(\".password\").toggle();\n\t\t\t\t$(\".login\").toggle();\n\t\t\t\t$(\".reset\").toggle();\n\t\t\t\tif ($(\".reset_btn\").text() === \"cambiar contraseña\") {\n\t\t\t\t\t$(\".reset_btn\").text(\"atras\");\n\t\t\t\t} else {\n\t\t\t\t\t$(\".reset_btn\").text(\"cambiar contraseña\");\n\t\t\t\t}\n\t\t\t},\n            mostrar_signup: function() {\n                this.cta_text = \"signup\";\n                // this.cta = this.cta_signup();\n\t\t\t\t// $(\".login\").toggle();\n\t\t\t\t// $(\".reset\").toggle();\n                // $(\".signup\").toggle();\n\t\t\t\t// if ($(\".reset_btn\").text() === \"cambiar contraseña\") {\n\t\t\t\t// \t$(\".reset_btn\").text(\"atras\");\n\t\t\t\t// } else {\n\t\t\t\t// \t$(\".reset_btn\").text(\"cambiar contraseña\");\n\t\t\t\t// }\n\t\t\t},\n            cta: function(accion) {\n                if (accion === \"login\") {\n                    this.login();\n                } else if (accion === \"signup\") {\n                    this.signup();\n                }\n            }\n\t\t}   \n\t}\n</script>"]}]}