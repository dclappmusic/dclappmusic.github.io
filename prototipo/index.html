<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="dClapp">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<title>dClapp</title>
	<link rel="icon" type="image/jpg" href="images/favicon.png">
	<link rel="stylesheet" href="css/styles.css">
	<meta name="p:domain_verify" content="010c67b82d18bca303e35e8b40011654"/>

</head>

<body>
	<div class="container home">
		<a class="cambio_modo" href="showtime.html"></a>
		<a class="boton showtime" href="clapp.html">
			<img src="images/icon_clapp.png" />
		</a>
		<div class="intro_clapp">
		<a href="login.html">	<h3 class="display-med">para clappear<br>pulsa el botón</h3></a>
		</div>

		<ul class="menu">
			<li class="menu-tit">
				<a href="historial.html">historial</a>
			</li>
			<li class="menu-tit active" id="preclapp">
				<a href="index.html">CLAPP</a>
			</li>
			<li class="menu-tit">
				<a href="opciones.html">opciones</a>
			</li>
		</ul>
	</div>

	

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.5.1/firebase.js"></script>
    <script type="text/javascript" src="js/firebase-config.js"></script>
	<!-- <script type="text/javascript" src="js/usuarios.js"></script> -->
	<script type="text/javascript" src="js/script.js"></script>
	<script type="text/javascript">
		const firestore = firebase.firestore();
		const settings = {/* your settings... */ timestampsInSnapshots: true};
		  firestore.settings(settings);
		  
		//coge el ID de la usuario mandado por URL parameter desde la pantalla del login
		const usuario = getUrlParameter("user");
		console.log(usuario);
		// console.log(usuario.bands.length);
		
		//añadir usuario al final de todos los links
		$('a').each(function() {
			var href = $(this).attr('href');

			if (href) {
				href += (href.match(/\?/) ? '&' : '?') + "user=" + usuario;
				$(this).attr('href', href);
			}
		});





		const userRef = firestore.collection("usuarios").doc(usuario);
		userRef.get().then(function(doc) {
			if (doc.exists) {
				console.log("Document data:", doc.data());
			} else {
				// doc.data() will be undefined in this case
				console.log("No such document!");
			}
		}).catch(function(error) {
			console.log("Error getting document:", error);
		});
		


		// if (usuario.bands.length > 0) {
		// 	console.log(usuario.bands);
		// 	$(".cambio_modo").html("showtime " + usuario.bands);
		// } else {
		// 	console.log("no bands");
		// 	$(".cambio_modo").hide();
		// }

	</script>
 </body>
</html>








