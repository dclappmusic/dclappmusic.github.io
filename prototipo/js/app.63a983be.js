(function(e){function t(t){for(var n,r,i=t[0],c=t[1],l=t[2],u=0,d=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);p&&p(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],n=!0,r=1;r<o.length;r++){var i=o[r];0!==a[i]&&(n=!1)}n&&(s.splice(t--,1),e=c(c.s=o[0]))}return e}var n={},r={app:0},a={app:0},s=[];function i(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-24ae25be":"697666a8","chunk-2d22c6c5":"37bd9822"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.e=function(e){var t=[],o={"chunk-24ae25be":1};r[e]?t.push(r[e]):0!==r[e]&&o[e]&&t.push(r[e]=new Promise((function(t,o){for(var n="css/"+({}[e]||e)+"."+{"chunk-24ae25be":"25decd3e","chunk-2d22c6c5":"31d6cfe0"}[e]+".css",a=c.p+n,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var l=s[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===n||u===a))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===n||u===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete r[e],p.parentNode.removeChild(p),o(s)},p.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){r[e]=0})));var n=a[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,o){n=a[e]=[t,o]}));t.push(n[2]=s);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(p);var o=a[e];if(0!==o){if(o){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",d.name="ChunkLoadError",d.type=n,d.request=r,o[1](d)}a[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(o,n,function(t){return e[t]}.bind(null,n));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/prototipo/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var p=u;s.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"56d7":function(e,t,o){"use strict";o.r(t);o("cadf"),o("551c"),o("f751"),o("097d");var n=o("2b0e"),r=o("8aa5"),a=o.n(r),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container",attrs:{id:"app"}},[o("router-view",{attrs:{geolocation:this.geolocation,shows:this.shows,usuario:e.usuario}}),e.show_login?o("PopupLogin"):e._e(),e.show_install?o("PopupInstall",{attrs:{deferredPrompt:this.deferredPrompt},on:{cerrar_popup:e.event_cerrar_popup}}):e._e()],1)},i=[],c=(o("ac6a"),function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),l=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nav",{staticClass:"nav"},[o("p",{staticClass:"slider_link agenda"},[e._v("agenda")]),o("p",{staticClass:"slider_link home"},[e._v("home")])])}],u={name:"Nav",props:["admin"]},d=u,p=o("2877"),f=Object(p["a"])(d,c,l,!1,null,null,null),g=f.exports,h=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"install popup"},[o("div",{staticClass:"sub_popup"},[o("button",{staticClass:"boton-med install",on:{click:e.install}},[e._v("Añadir la app a tu móvil")]),o("button",{staticClass:"boton-secundario cancelar",on:{click:e.cerrar}},[e._v("No añadir")])])])},m=[],v={name:"PopupInstall",props:["deferredPrompt"],created:function(){},data:function(){return{}},methods:{install:function(e){var t=this;this.deferredPrompt.prompt(),this.deferredPrompt.userChoice.then((function(e){"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),t.deferredPrompt=null})),this.$emit("cerrar_popup",this.deferredPrompt)},cerrar:function(){this.$emit("cerrar_popup","install")}}},_=v,b=Object(p["a"])(_,h,m,!1,null,null,null),w=b.exports,y=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login popup"},[o("div",{staticClass:"sub_popup"},[o("div",{staticClass:"form"},[o("div",[o("label",{staticClass:"form-label email"},[e._v("Email\n                        "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.user_email,expression:"user_email"}],staticClass:"form-input",attrs:{placeholder:"email",type:"email"},domProps:{value:e.user_email},on:{input:function(t){t.target.composing||(e.user_email=t.target.value)}}})]),"restablecer"!=e.cta_text?o("label",{staticClass:"form-label password"},[e._v("Password\n                        "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.user_password,expression:"user_password"}],staticClass:"form-input password",attrs:{placeholder:"password",type:"password"},domProps:{value:e.user_password},on:{input:function(t){t.target.composing||(e.user_password=t.target.value)}}})]):e._e()]),o("button",{staticClass:"boton cta",on:{click:function(t){return e.cta(e.cta_text)}}},[e._v("\n                    "+e._s(e.cta_text)+"\n                ")]),o("div",["login"!=e.cta_text?o("a",{staticClass:"login_btn",on:{click:e.mostrar_login}},[e._v("atrás")]):e._e(),"login"===e.cta_text?o("a",{staticClass:"reset_btn",on:{click:e.mostrar_reset}},[e._v("restablecer contraseña")]):e._e(),"login"===e.cta_text?o("a",{staticClass:"signup_btn",on:{click:e.mostrar_signup}},[e._v("crear una cuenta")]):e._e()])])])])},P=[],k=(o("a481"),{name:"PopupLogin",created:function(){},mounted:function(){},data:function(){return{user_email:"",user_password:"",cta_text:"login"}},props:{},methods:{login:function(){var e=this,t=a.a.auth();t.signInWithEmailAndPassword(this.user_email,this.user_password).then((function(){t.currentUser;e.$router.replace("home"),console.log("logged")})).catch((function(e){e.code;var t=e.message;window.alert("error: "+t)}))},signup:function(){var e=this,t=a.a.auth();t.createUserWithEmailAndPassword(this.user_email,this.user_password).then((function(){a.a.firestore().collection("fans").doc(t.currentUser.uid).set({uid:t.currentUser.uid,email:e.user_email}).then((function(){console.log("signup correcto")}))}))},reset:function(){a.a.auth().sendPasswordResetEmail(this.user_email).then((function(){console.log("reseteando"),alert("Revisa tu email para poner una contraseña")})).catch((function(e){console.log(e)}))},mostrar_reset:function(){this.cta_text="restablecer"},mostrar_signup:function(){this.cta_text="signup"},mostrar_login:function(){this.cta_text="login"},cta:function(e){"login"===e?this.login():"signup"===e?this.signup():"restablecer"===e&&this.reset()}}}),C=k,S=Object(p["a"])(C,y,P,!1,null,null,null),O=S.exports,x={name:"app",components:{Nav:g,PopupInstall:w,PopupLogin:O},data:function(){return{show_login:!0,usuario:{},geolocation:{latitud:null,longitud:null},shows:[],show_install:!1,deferredPrompt:null}},created:function(){var e=this;setInterval((function(){e.fecha_hoy=new Date}),1e3),a.a.auth().onAuthStateChanged((function(t){t?(console.log("ya estas logueado"),console.log(t),e.show_login=!1,a.a.firestore().collection("fans").doc(t.uid).onSnapshot((function(t){e.usuario=t.data(),console.log(e.usuario)}))):(e.show_login=!0,console.log("no estás logueado"))}))},mounted:function(){var e=this;this.get_shows(),window.addEventListener("beforeinstallprompt",(function(t){t.preventDefault(),e.deferredPrompt=t,e.show_install=!0}))},methods:{get_shows:function(){var e=this;localStorage.getItem("coords")&&(this.geolocation=JSON.parse(localStorage.getItem("coords")),console.log(this.geolocation)),this.get_geolocation();var t=a.a.firestore();t.collection("shows").onSnapshot((function(t){t.forEach((function(t){var o=t.data();console.log(o),e.shows.push(o)}))}))},get_geolocation:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.browserGeolocationSuccess,this.browserGeolocationFail,{maximumAge:2e4,timeout:1e4,enableHighAccuracy:!1}):console.log("Navigator geolocation unavailable.")},browserGeolocationSuccess:function(e){this.geolocation.latitud=e.coords.latitude,this.geolocation.longitud=e.coords.longitude,console.log("Browser geolocation success!\n\nlat = "+e.coords.latitude+"\nlng = "+e.coords.longitude),localStorage.setItem("coords",JSON.stringify(this.geolocation))},browserGeolocationFail:function(e){switch(e.code){case e.TIMEOUT:console.log("Browser geolocation error !\n\nTimeout.");break;case e.PERMISSION_DENIED:0==e.message.indexOf("Only secure origins are allowed")?this.tryAPIGeolocation():console.log("Permison denied");break;case e.POSITION_UNAVAILABLE:console.log("Browser geolocation error !\n\nPosition unavailable.");break}},tryAPIGeolocation:function(){jQuery.post("https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyDCa1LUe1vOczX1hO_iGYgyo8p_jYuGOPU",(function(e){this.apiGeolocationSuccess({coords:{latitude:e.location.lat,longitude:e.location.lng}})})).fail((function(e){console.log("API Geolocation error! \n\n"+e)}))},apiGeolocationSuccess:function(e){this.geolocation.latitud=e.coords.latitude,this.geolocation.longitud=e.coords.longitude,console.log("API geolocation success!\n\nlat = "+latitud+"\nlng = "+longitud),localStorage.setItem("coords",JSON.stringify(this.geolocation))}}},A=x,E=Object(p["a"])(A,s,i,!1,null,null,null),I=E.exports,N=o("8c4f");n["a"].use(N["a"]);var j=new N["a"]({routes:[{path:"/",name:"index",props:!0,component:function(){return o.e("chunk-24ae25be").then(o.bind(null,"d504"))}},{path:"/index",name:"index",props:!0,component:function(){return o.e("chunk-24ae25be").then(o.bind(null,"d504"))}},{path:"/sub",name:"sub",props:!0,component:function(){return o.e("chunk-2d22c6c5").then(o.bind(null,"f2be"))}}]}),L=o("9483");Object(L["a"])("".concat("/prototipo/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),n["a"].config.productionTip=!1;var T={apiKey:"AIzaSyCcFHmQQSZQMCLlNetLQbW2T4Z7AKH6ztc",authDomain:"weclapp-eddbd.firebaseapp.com",databaseURL:"https://weclapp-eddbd.firebaseio.com",projectId:"weclapp-eddbd",storageBucket:"",messagingSenderId:"611930943683",appId:"1:611930943683:web:c50aff0449c4ad6a"};a.a.initializeApp(T),new n["a"]({router:j,render:function(e){return e(I)}}).$mount("#app")}});
//# sourceMappingURL=app.63a983be.js.map