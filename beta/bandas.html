<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="dClapp">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<title>dClapp</title>
	<link rel="icon" type="image/jpg" href="images/favicon.png">
	<link rel="stylesheet" href="css/styles.css">
	<meta name="p:domain_verify" content="010c67b82d18bca303e35e8b40011654"/>

</head>

<body>
	<div class="container bandas">
        <h1 class="cabecera">BANDAS</h1>
        <ul class="bands">
        </ul>
        <ul class="menu">
			<li class="menu-tit">
				<a href="historial.html">historial</a>
			</li>
			<li class="menu-tit" id="preclapp">
				<a href="index.html">CLAPP</a>
			</li>
			<li class="menu-tit active">
				<a href="opciones.html">bandas</a>
			</li>
		</ul>
	</div>

	

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.5.1/firebase.js"></script>
<script type="text/javascript" src="js/firebase-config.js"></script>
<script type="text/javascript" src="js/script.js"></script>
<script type="text/javascript">
    const bandsRef = firestore.collection("bandas");
    bandsRef.get().then((querySnapshot) => {
        querySnapshot.forEach((doc) => {
            const db_banda = doc.data();
            console.log(db_banda);
            if (!db_banda.imagen) {
                db_banda.imagen = "images/perfil_kurt.png";
            }
            const liBandas = "<li class='banda'><a href='perfil.html?band=" + doc.id + "'><img src='" + db_banda.imagen + "' /><p class='band'>" + db_banda.nombre + "</p></a></li>"
            $(".bands").append(liBandas);
        })
       
    });
	function funcion_user () {
	// --------------historial de clapps
		var user; 

		//cargar historial de clapps dado el identificador del perfil del usuario
		function cargar_historial (I_id) {
			console.log("cargar historial");
			var clapp;

			//descargarse user_persona 
			const userRef = firestore.collection("usuarios").doc(userId).collection("clapps");
			const bandsRef = firestore.collection("bandas");
			userRef.get().then((querySnapshot) => {
				//Por cada clapp, mostrar sus datos aÃ±adiendolos a una lista
				querySnapshot.forEach(function(doc) {
					console.log(doc.id, " => ", doc.data());
					clapp = doc.data();
					const bandRef = bandsRef.doc(clapp.band);
					bandRef.get().then((doc) => {
						const db_banda = doc.data();
						const liBandas = "<li class='clappeado'><a href='perfil.html?band=" + doc.id + "'><img src='" + db_banda.imagen + "' /><p class='band'>" + db_banda.nombre + "</p></a></li>"
						$(".clapps").append(liBandas);
					});
				});
			});
		};
	}
</script>	
</body>
</html>








