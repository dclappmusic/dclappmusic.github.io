(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77c79cd9"],{"0748":function(t,e,s){"use strict";var n=s("73bb"),i=s.n(n);i.a},"0a49":function(t,e,s){var n=s("9b43"),i=s("626a"),o=s("4bf8"),r=s("9def"),a=s("cd1c");t.exports=function(t,e){var s=1==t,c=2==t,l=3==t,u=4==t,p=6==t,f=5==t||p,h=e||a;return function(e,a,d){for(var m,v,_=o(e),w=i(_),g=n(a,d,3),b=r(w.length),y=0,O=s?h(e,b):c?h(e,0):void 0;b>y;y++)if((f||y in w)&&(m=w[y],v=g(m,y,_),t))if(s)O[y]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return y;case 2:O.push(m)}else if(u)return!1;return p?-1:l||u?u:O}}},"18a4":function(t,e,s){"use strict";var n=s("3601"),i=s.n(n);i.a},"18d9":function(t,e,s){},"1d38":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page agenda",attrs:{"data-page":"agenda"}},[s("div",{staticClass:"cabecera"},[s("h1",{staticClass:"titulo"},[t._v("Agenda de conciertos streaming")]),t._m(0),s("keep-alive",[t.filters?s("AgendaFilters",{on:{filters_popup:function(e){t.filters=!1},filtering:t.filtering}}):t._e()],1)],1),t.shows[0]?s("div",{staticClass:"view"},[t.map?s("keep-alive"):s("keep-alive",[s("agendaList",{attrs:{shows:t.shows_filtered}})],1)],1):s("div",{staticClass:"spinner"},[s("p",{staticClass:"display-sm"},[t._v("un segundito mientras cargamos la agenda...")])])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"logo",attrs:{href:"https://weclapp.live/",target:"blank"}},[s("img",{attrs:{src:"images/icon_completo.png"}})])}],o=(s("8e6e"),s("ac6a"),s("456d"),s("6762"),s("2fdb"),s("75fc")),r=s("bd86"),a=s("2f62"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shows"},[t._l(t.shows_week,(function(e,n){return s("div",{key:n,staticClass:"dia"},[e[0]?s("div",[s("p",{staticClass:"when display-med"},[t._v(t._s("0"===n?"Today":"1"===n?"Tomorrow":t.$moment(e[0].timestamp).format("dddd DD")))]),t._l(e,(function(t,e){return s("ShowCard",{key:e,class:{live:t.live},attrs:{show:t,type:"list",from:"list"}})}))],2):t._e()])})),t.other_shows[0]?s("div",{staticClass:"dia"},[s("p",{staticClass:"when display-med"},[t._v("Soon")]),t._l(t.other_shows,(function(t,e){return s("ShowCard",{key:e,staticClass:"list-soon",attrs:{show:t,type:"list_soon",from:"list"}})}))],2):t._e()],2)},l=[],u=(s("55dd"),s("b54a"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"show",class:{open:t.ampliado,live:t.show.live},on:{click:t.ampliar}},["list_soon"===t.type?s("p",{staticClass:"display-sm soon"},[t._v(t._s(this.$moment(t.show.timestamp).format("DD/MM")))]):t._e(),s("p",{staticClass:"parrafo-sm hora"},[t._v(t._s(this.$moment(t.show.timestamp).format("HH:mm")))]),s("div",{staticClass:"caja"},[s("div",{staticClass:"primera_fila"},[t.getBand(t.show.band_id)?s("div",{staticClass:"foto_container"},[s("img",{staticClass:"foto",attrs:{src:t.getBand(t.show.band_id).image?t.getBand(t.show.band_id).image:"images/avatar_placeholder.jpg"}})]):t._e(),s("div",{staticClass:"datos_principales"},[s("div",{staticClass:"banda"},[s("p",{staticClass:"display-med"},[t._v(t._s(t.show.band?t.show.band:""))])]),s("div",{staticClass:"segunda"},[s("p",{staticClass:"tipo parrafo"},[t._v(t._s(t.show.show_type?t.show.show_type:""))])]),s("div",{staticClass:"segunda"},[s("p",{staticClass:"parrafo"},[t._v(t._s(t.show.festival?t.show.festival:""))])])])]),s("div",{staticClass:"segunda_fila"},[t.show.link?s("a",{staticClass:"boton-sm comprar",attrs:{href:t.show.link,target:"blank"}},[t._v("Ver concierto")]):t._e()])])])}),p=[];s("7514");function f(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function h(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?f(s,!0).forEach((function(e){Object(r["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):f(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d={name:"ShowCard",props:["show","type","from"],data:function(){return{show_form:!1,ampliado:!1}},computed:h({},Object(a["b"])(["bands"])),created:function(){},mounted:function(){},methods:{ampliar:function(){},getBand:function(t){var e=this.bands.find((function(e){return e.id===t}));return e}}},m=d,v=(s("18a4"),s("2877")),_=Object(v["a"])(m,u,p,!1,null,"5593a057",null),w=_.exports;function g(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function b(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?g(s,!0).forEach((function(e){Object(r["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):g(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var y={name:"agendaList",props:["shows"],components:{ShowCard:w},data:function(){return{shows_week:{},other_shows:[],shows_here:[]}},computed:b({},Object(a["b"])(["city","geolocation"])),watch:{shows:function(){this.shows_city()}},created:function(){},mounted:function(){this.shows_city()},methods:{shows_city:function(){var t=this;this.shows_here=[],this.shows.forEach((function(e){t.shows_here.push(e)})),this.filter_shows()},filter_shows:function(){var t=this,e=this.$moment().hours(12).minutes(0).seconds(0).millisecond(0),s=this.$moment();for(var n in this.shows_week={0:[],1:[],2:[],3:[],4:[],5:[],6:[]},this.shows_here.forEach((function(n){var i=t.$moment(n.timestamp),o=t.$moment().set({year:i.year(),month:i.month(),date:i.date(),hour:i.hour(),minute:i.minute(),second:0,millisecond:0}),r=o.diff(e,"days"),a=i.diff(s,"hours");r>=0&&r<7?(n.diff_days=r,n.diff_hours=a,n.link&&a>-1&&(n.live=a<0,t.shows_week[r].push(n))):r>6&&(n.link&&t.shows_week[r].push(n),t.other_shows.push(n))})),this.shows_week)this.shows_week[n].sort((function(e,s){return t.$moment(e.timestamp).unix()-t.$moment(s.timestamp).unix()}));this.other_shows.sort((function(e,s){return t.$moment(e.timestamp).unix()-t.$moment(s.timestamp).unix()}))}}},O=y,C=(s("484b"),Object(v["a"])(O,c,l,!1,null,"474a5d3a",null)),j=C.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"popup"},[s("form",{staticClass:"sub_popup"},[s("label",{staticClass:"form-label"},[t._v("\n            Band\n            "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.show_band,expression:"show_band"}],staticClass:"form-input",attrs:{placeholder:"Grupo",type:"text"},domProps:{value:t.show_band},on:{input:function(e){e.target.composing||(t.show_band=e.target.value)}}})]),t._m(0),s("input",{attrs:{type:"file",accept:"image/x-png,image/gif,image/jpeg"},on:{change:t.handleFiles}}),s("div",{staticClass:"boton",on:{click:t.subir_show}},[t._v("\n            subir\n        ")])])])},k=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"image_label",attrs:{for:"band-image"}},[s("span",{staticClass:"empty"},[t._v("+")])])}],x={name:"ModalSubirShow",props:[],created:function(){console.log(this),console.log(this.show_band)},data:function(){return{band_name:null,band_image:null}},methods:{subir_show:function(){},handleFiles:function(t){t&&(this.band_image=t.target.files[0]);var e=storageRef.child(fotoId).put(imagen);e.on("state_changed",(function(t){var e=Math.round(t.bytesTransferred/t.totalBytes*100);console.log("Upload is "+e+"% done"),image_label.find("span").removeClass("empty").html(e+"%")}),(function(t){console.log("error: "+t)}),(function(){e.snapshot.ref.getDownloadURL().then((function(t){console.log("imagen guardada en: "+t),bandRef.doc(bandId).update({imagen:t}).then((function(){$(".paso.imagen .sig").show()}))}))}))}}},S=x,E=(s("a127"),Object(v["a"])(S,P,k,!1,null,"5240a17c",null)),D=E.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"popup filters"},[s("div",{staticClass:"sub_popup"},[s("a",{staticClass:"cerrar",on:{click:t.close_popup}},[s("svg",{attrs:{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.05275 7.99504L12.7522 13.8808L13.99 12.6025L8.29057 6.71676L13.4414 1.39755L12.2036 0.119268L7.05275 5.43847L1.7864 0L0.548577 1.27828L5.81492 6.71676L0 12.7217L1.23782 14L7.05275 7.99504Z",fill:"#F1F1F1"}})])]),s("div",{staticClass:"filter show_type"},[s("h3",{staticClass:"display-sm"},[t._v("Tipo de show:")]),s("ul",{staticClass:"show_type_container"},t._l(t.show_types,(function(e,n){return s("li",{key:n,staticClass:"filtro",class:{active:t.filter_type.includes(e)},on:{click:function(s){return t.filtering(e)}}},[s("p",{staticClass:"parrafo"},[t._v(t._s(e))])])})),0)]),s("div",{staticClass:"filter show_price"},[s("h3",{staticClass:"display-sm"},[t._v("Precio máximo (€):")]),s("ul",{staticClass:"show_price_container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter_price,expression:"filter_price"}],staticClass:"slider",attrs:{type:"range",min:"0",max:"50",step:"10",list:"precios"},domProps:{value:t.filter_price},on:{__r:function(e){t.filter_price=e.target.value}}}),t._m(0)])]),s("a",{staticClass:"boton",on:{click:t.close_popup}},[t._v("listo")])])])},F=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("datalist",{staticClass:"precios",attrs:{id:"precios"}},[s("option",{attrs:{value:"0"}},[t._v("gratis")]),s("option",{attrs:{value:"10"}},[t._v("10")]),s("option",{attrs:{value:"20"}},[t._v("20")]),s("option",{attrs:{value:"30"}},[t._v("30")]),s("option",{attrs:{value:"40"}},[t._v("40")]),s("option",{attrs:{value:"50"}},[t._v("todos")])])}];function A(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function B(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?A(s,!0).forEach((function(e){Object(r["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):A(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var M={name:"AgendaFilters",props:[],data:function(){return{show_types:[],filter_type:[],filter_price:50}},computed:B({},Object(a["b"])(["shows"])),watch:{},created:function(){var t=this;console.log(this.show_types),this.show_types[0]||(this.show_types=[],this.shows.forEach((function(e){var s=e.show_type;console.log(s),s&&!t.show_types.includes(s)&&(t.show_types.push(s),t.filter_type.push(s))})))},mounted:function(){},methods:{filtering:function(t){if(this.filter_type.includes(t)){var e=this.filter_type.indexOf(t);this.filter_type.splice(e,1)}else this.filter_type.push(t)},close_popup:function(){var t={tipo:this.filter_type,price:this.filter_price};this.$emit("filtering",t),this.$emit("filters_popup",!1)}}},T=M,R=(s("0748"),Object(v["a"])(T,L,F,!1,null,"3bc5383e",null)),H=R.exports,I=s("bc3a"),J=s.n(I);function N(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function U(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?N(s,!0).forEach((function(e){Object(r["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):N(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var q={name:"Agenda",props:[],components:{agendaList:j,AgendaFilters:H,ModalSubirShow:D},data:function(){return{map:!1,city:null,filters:!1,shows_filtered:[],findLocation:!1}},computed:U({},Object(a["b"])(["geolocation","shows"])),watch:{geolocation:function(){},shows_filtered:function(){},shows:function(){this.shows_filtered=Object(o["a"])(this.shows)}},created:function(){this.shows_filtered=Object(o["a"])(this.shows)},mounted:function(){},methods:{getCity:function(){var t=this,e="https://api.mapbox.com/geocoding/v5/mapbox.places/"+this.geolocation.lon+","+this.geolocation.lat+".json?access_token="+this.accessToken;J.a.get(e).then((function(e){t.city=e.data.features[3].text,t.$store.commit("updateCity",t.city)}))},filtering:function(t){console.log(t.tipo),console.log(t.price),50===t.price&&(t.price=500),this.shows_filtered=this.shows.filter((function(e){return t.tipo.includes(e.show_type)&&t.price>=e.price})),console.log(this.shows_filtered)},geolocationError:function(t){}}},G=q,V=(s("58a2"),Object(v["a"])(G,n,i,!1,null,"66a61411",null));e["default"]=V.exports},"2d78":function(t,e,s){},"2fdb":function(t,e,s){"use strict";var n=s("5ca1"),i=s("d2c8"),o="includes";n(n.P+n.F*s("5147")(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},3601:function(t,e,s){},"386b":function(t,e,s){var n=s("5ca1"),i=s("79e5"),o=s("be13"),r=/"/g,a=function(t,e,s,n){var i=String(o(t)),a="<"+e;return""!==s&&(a+=" "+s+'="'+String(n).replace(r,"&quot;")+'"'),a+">"+i+"</"+e+">"};t.exports=function(t,e){var s={};s[t]=e(a),n(n.P+n.F*i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",s)}},"484b":function(t,e,s){"use strict";var n=s("2d78"),i=s.n(n);i.a},5147:function(t,e,s){var n=s("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(s){try{return e[n]=!1,!"/./"[t](e)}catch(i){}}return!0}},"58a2":function(t,e,s){"use strict";var n=s("18d9"),i=s.n(n);i.a},6762:function(t,e,s){"use strict";var n=s("5ca1"),i=s("c366")(!0);n(n.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")("includes")},"73bb":function(t,e,s){},7514:function(t,e,s){"use strict";var n=s("5ca1"),i=s("0a49")(5),o="find",r=!0;o in[]&&Array(1)[o]((function(){r=!1})),n(n.P+n.F*r,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")(o)},8168:function(t,e,s){},a127:function(t,e,s){"use strict";var n=s("8168"),i=s.n(n);i.a},aae3:function(t,e,s){var n=s("d3f4"),i=s("2d95"),o=s("2b4c")("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},b54a:function(t,e,s){"use strict";s("386b")("link",(function(t){return function(e){return t(this,"a","href",e)}}))},cd1c:function(t,e,s){var n=s("e853");t.exports=function(t,e){return new(n(t))(e)}},d2c8:function(t,e,s){var n=s("aae3"),i=s("be13");t.exports=function(t,e,s){if(n(e))throw TypeError("String#"+s+" doesn't accept regex!");return String(i(t))}},e853:function(t,e,s){var n=s("d3f4"),i=s("1169"),o=s("2b4c")("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),n(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=chunk-77c79cd9.7ebc5910.js.map